(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7aa00c51"],{"0560":function(t,e,n){"use strict";var i=n("88d4"),r=n("34cd").find,a=n("d421"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),i({target:"Array",proto:!0,forced:o},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},"3ef3":function(t,e,n){"use strict";var i=n("88d4"),r=n("34cd").findIndex,a=n("d421"),s="findIndex",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),i({target:"Array",proto:!0,forced:o},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},"4f2d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layout",{attrs:{title:"管理材料信息"}},[n("ul",{staticClass:"supplier-container",on:{scroll:t.scorllEvt}},[t._l(t.list,(function(e){return n("li",{key:e.id},[n("div",[t._v(t._s(e.name))]),n("span",[t._v(t._s(e.address))]),n("span",{staticClass:"t"},[t._v("联系人："+t._s(e.contact)+" 联系方式："+t._s(e.phone))]),n("i",{staticClass:"opt-btn"},[n("i",{on:{click:function(n){return t.btnEvt("edit",e)}}}),n("i",{staticClass:"del",on:{click:function(n){return t.btnEvt("delete",e)}}})])])})),n("li",{staticClass:"more"},[t._v(" "+t._s(t.hasMore?"上滑加载更多数据":"没有更多数据")+" ")])],2)])},r=[],a=n("febe"),s=(n("e186"),n("b3d9"),n("10dd"),n("3ef3"),n("993f"),n("edce")),o=n("e5f2"),c={mixins:[o["a"]],data:function(){return{list:[],paging:{page:1,size:10},total:0,loading:!0,hasMore:!0}},created:function(){this.getList()},methods:{getList:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$toast.loading({message:"数据加载中...",forbidClick:!0,duration:0}),e.next=3,Object(s["c"])(t.paging);case 3:return n=e.sent,t.$toast.clear(),200===n.code&&(t.list=t.list.concat(n.data.rows),t.total=n.data.total,t.hasMore=t.total>t.paging.page*t.paging.size),e.next=8,t.$nextTick();case 8:t.loading=!1;case 9:case"end":return e.stop()}}),e)})))()},scorllEvt:function(t){var e=t.target,n=e.scrollHeight,i=e.clientHeight,r=e.scrollTop,a=n-i<=r+12;a&&!this.loading&&this.hasMore&&(this.loading=!0,this.paging.page+=1,this.getList())},btnEvt:function(t,e){var n=this;switch(t){case"edit":if(!this.handleRole("SYSTEM-01-06","U"))return;this.$store.commit("common/mutationEditData",e),this.$router.push({path:"/supplier/edit",query:{id:e.id}});break;case"delete":if(!this.handleRole("SYSTEM-01-06","D"))return;this.$dialog.confirm({title:"删除提示",message:"确定要删除【".concat(e.name,"】这个供应商的信息？")}).then(Object(a["a"])(regeneratorRuntime.mark((function t(){var i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["b"])(e.id);case 2:i=t.sent,200===i.code?(r=n.list.findIndex((function(t){return t.id===e.id})),n.list.splice(r,1),n.$toast.success("删除供应商信息成功")):n.$toast.fail("删除供应商信息成功");case 4:case"end":return t.stop()}}),t)})))).catch((function(){}));break;default:break}}}},l=c,d=n("cba8"),u=Object(d["a"])(l,i,r,!1,null,null,null);e["default"]=u.exports},"993f":function(t,e,n){"use strict";var i=n("88d4"),r=n("8735"),a=n("1c34"),s=n("58db"),o=n("126a"),c=n("ac3c"),l=n("492f"),d=n("c40a"),u=n("3a6d"),f=u("splice"),h=r.TypeError,g=Math.max,p=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var n,i,r,u,f,b,w=c(this),x=o(w),k=a(t,x),_=arguments.length;if(0===_?n=i=0:1===_?(n=0,i=x-k):(n=_-2,i=p(g(s(e),0),x-k)),x+n-i>m)throw h(v);for(r=l(w,i),u=0;u<i;u++)f=k+u,f in w&&d(r,u,w[f]);if(r.length=i,n<i){for(u=k;u<x-i;u++)f=u+i,b=u+n,f in w?w[b]=w[f]:delete w[b];for(u=x;u>x-i+n;u--)delete w[u-1]}else if(n>i)for(u=x-i;u>k;u--)f=u+i-1,b=u+n-1,f in w?w[b]=w[f]:delete w[b];for(u=0;u<n;u++)w[u+k]=arguments[u+2];return w.length=x-i+n,r}})},e5f2:function(t,e,n){"use strict";n("0560"),n("89a8"),n("2788"),n("aa08");var i={computed:{roles:function(){return this.$store.getters["common/getRoles"]}},methods:{handleRole:function(t,e){var n=this.roles.find((function(e){return e.id===t}));return!(!n||!n.role.includes(e))||(this.$toast.fail("你没有修改数据的权限"),!1)}}};e["a"]=i}}]);
//# sourceMappingURL=chunk-7aa00c51.4cd1b585.js.map