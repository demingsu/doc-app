(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b5f0f3c8"],{a4d8:function(e,a,t){"use strict";t("bb4f")},bb4f:function(e,a,t){},fe81:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("layout",{attrs:{showBack:e.isEdit,title:(e.isEdit?"编辑":"新增")+"项目信息"}},[t("div",{staticClass:"edit-container"},[t("span",{staticClass:"title"},[e._v("基本信息")]),t("van-form",{on:{submit:e.onSubmit}},[t("van-field",{attrs:{name:"项目名",label:"项目名",placeholder:"请输入项目名",rules:e.rules.name},model:{value:e.pageData.name,callback:function(a){e.$set(e.pageData,"name",a)},expression:"pageData.name"}}),t("van-field",{attrs:{name:"签订日期",label:"签订日期",clearable:"",readonly:"",placeholder:"请选择签订日期",rules:e.rules.signTime},scopedSlots:e._u([{key:"button",fn:function(){return[t("van-button",{attrs:{size:"small","native-type":"button",type:"primary"},on:{click:function(a){e.calendarShow=!0}}},[e._v("选择日期")])]},proxy:!0}]),model:{value:e.pageData.signTime,callback:function(a){e.$set(e.pageData,"signTime",a)},expression:"pageData.signTime"}}),t("van-field",{attrs:{name:"地市",label:"地市",clearable:"",readonly:"",placeholder:"请选择地市",rules:e.rules.address},scopedSlots:e._u([{key:"button",fn:function(){return[t("van-button",{attrs:{size:"small","native-type":"button",type:"primary"},on:{click:function(a){e.cityShow=!0}}},[e._v("选择地市")])]},proxy:!0}]),model:{value:e.address,callback:function(a){e.address=a},expression:"address"}}),t("van-field",{attrs:{name:"详细地址",label:"详细地址",placeholder:"请输入详细地址",rules:e.rules.detailAddress},model:{value:e.pageData.address,callback:function(a){e.$set(e.pageData,"address",a)},expression:"pageData.address"}}),t("van-field",{attrs:{name:"负责人",label:"负责人",clearable:"",readonly:"",placeholder:"请选择负责人",rules:e.rules.liableName},scopedSlots:e._u([{key:"button",fn:function(){return[t("van-button",{attrs:{size:"small","native-type":"button",type:"primary"},on:{click:function(a){e.userShow=!0}}},[e._v("选择负责人")])]},proxy:!0}]),model:{value:e.pageData.liableName,callback:function(a){e.$set(e.pageData,"liableName",a)},expression:"pageData.liableName"}}),t("span",{staticClass:"title"},[e._v("业主信息")]),t("van-field",{attrs:{name:"业主",label:"业主",placeholder:"请输入业主",rules:e.rules.ownerName},model:{value:e.pageData.ownerName,callback:function(a){e.$set(e.pageData,"ownerName",a)},expression:"pageData.ownerName"}}),t("van-field",{attrs:{name:"业主地址",label:"业主地址",placeholder:"请输入业主地址",rules:e.rules.ownerAddress},model:{value:e.pageData.ownerAddress,callback:function(a){e.$set(e.pageData,"ownerAddress",a)},expression:"pageData.ownerAddress"}}),t("van-field",{attrs:{name:"联系电话",label:"联系电话",placeholder:"请输入联系电话",rules:e.rules.ownerPhone},model:{value:e.pageData.ownerPhone,callback:function(a){e.$set(e.pageData,"ownerPhone",a)},expression:"pageData.ownerPhone"}}),t("span",{staticClass:"title"},[e._v("备注信息")]),t("van-field",{attrs:{name:"备注",label:"备注",type:"textarea",placeholder:"请输入备注"},model:{value:e.pageData.remark,callback:function(a){e.$set(e.pageData,"remark",a)},expression:"pageData.remark"}}),t("div",{staticClass:"btn"},[t("van-button",{attrs:{round:"",block:"",type:"primary","native-type":"submit"}},[e._v("提交")])],1)],1)],1),t("van-calendar",{on:{confirm:e.calendarConfirm},model:{value:e.calendarShow,callback:function(a){e.calendarShow=a},expression:"calendarShow"}}),t("van-popup",{style:{height:"308px"},attrs:{position:"bottom"},model:{value:e.cityShow,callback:function(a){e.cityShow=a},expression:"cityShow"}},[t("van-area",{attrs:{title:"标题","area-list":e.areaList},on:{cancel:function(a){e.cityShow=!1},confirm:e.cityConfirm}})],1),t("van-popup",{style:{height:"100%"},attrs:{position:"bottom"},model:{value:e.userShow,callback:function(a){e.userShow=a},expression:"userShow"}},[t("div",{staticClass:"simple-list"},[t("header",[t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.userName,expression:"userName",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"输入需要过滤的名字"},domProps:{value:e.userName},on:{change:function(a){e.userName=a.target.value}}})]),t("ul",e._l(e.userList,(function(a){return t("li",{directives:[{name:"show",rawName:"v-show",value:a.show,expression:"it.show"}],key:a.id},[t("span",[e._v(e._s(a.name))]),t("em",[e._v(e._s(a.id))]),t("i",{on:{click:function(t){return e.pickUser(a)}}})])})),0)])])],1)},s=[],r=t("febe"),i=(t("e186"),t("8ea3"),t("2788"),t("aa08"),t("10dd"),t("4c1e"),t("fee8"),t("1926"),t("89a8"),t("96d7")),o=t("4260"),l=t("d4d6"),c=t("b2e8"),u={data:function(){return{isEdit:!1,pageData:{id:"",name:"",liableId:"",liableName:"",signTime:"",province:"",city:"",county:"",address:"",ownerId:"",ownerName:"",ownerAddress:"",ownerPhone:"",remark:""},rules:{name:[{required:!0,message:"项目名称必须输入"}],liableName:[{required:!0,message:"负责人必须输入"}],signTime:[{required:!0,message:"签订事件必须输入"}],address:[{required:!0,message:"地址必须输入"}],detailAddress:[{required:!0,message:"详细地址必须输入"}],ownerName:[{required:!0,message:"业主必须输入"}],ownerAddress:[{required:!0,message:"业主地址必须输入"}],ownerPhone:[{required:!0,message:"业主电话必须输入"}]},calendarShow:!1,address:"",cityShow:!1,areaList:i["a"],userList:[],userName:"",userShow:!1}},watch:{userName:function(e){this.userList=this.userList.map((function(a){return a.show=a.name.includes(e),a}))}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var t,n,s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t=e.$route.query,n=e.$store.getters["common/getEditData"],e.isEdit=!!t.id,e.isEdit){for(s in e.pageData)e.pageData[s]=n[s]||"";e.pageData.signTime=Object(o["a"])(e.pageData.signTime,"yyyy-MM-dd"),e.address=e.pageData.province+"/"+e.pageData.city+"/"+e.pageData.county}return a.next=5,Object(l["e"])({page:1,size:1e3});case 5:r=a.sent,200===r.code&&(e.userList=r.data.rows.map((function(e){return e.show=!0,e})));case 7:case"end":return a.stop()}}),a)})))()},methods:{onSubmit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var t,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t=e.address.split("/"),e.pageData.province=t[0],e.pageData.city=t[1],e.pageData.county=t[2],!e.isEdit){a.next=10;break}return a.next=7,Object(c["d"])(e.pageData);case 7:n=a.sent,a.next=13;break;case 10:return a.next=12,Object(c["a"])(e.pageData);case 12:n=a.sent;case 13:e.$toast.clear(),200===n.code?e.$toast.success("".concat(e.isEdit?"修改":"新增","成功")):e.$toast.fail("".concat(e.isEdit?"修改":"新增","成功"));case 15:case"end":return a.stop()}}),a)})))()},calendarConfirm:function(e){this.pageData.signTime=Object(o["a"])(e,"yyyy-MM-dd"),this.calendarShow=!1},cityConfirm:function(e){this.address=e.reduce((function(e,a){return e.push(a.name),e}),[]).join("/"),this.cityShow=!1},pickUser:function(e){this.pageData.liableName=e.name,this.pageData.liableId=e.id,this.userShow=!1}}},d=u,p=(t("a4d8"),t("cba8")),m=Object(p["a"])(d,n,s,!1,null,"601a1954",null);a["default"]=m.exports}}]);
//# sourceMappingURL=chunk-b5f0f3c8.500f005a.js.map